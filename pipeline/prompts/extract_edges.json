{
  "extractor.predict": {
    "traces": [],
    "train": [],
    "demos": [],
    "signature": {
      "instructions": "You are tasked with extracting relationships between entities based on journal entries. Your goal is to identify and classify the relationships between various entities present in the provided text, following a structured input format.\n\n### Input Format:\n1. **episode_content**: A string containing a journal entry that describes interactions or events involving entities.\n2. **entities_json**: A JSON array of entities mentioned in the journal entry, including details such as entity name, types (e.g., Person, Organization, Activity, Place), and any relevant notes.\n3. **reference_time**: A timestamp indicating when the events in the journal entry occurred, formatted in ISO 8601.\n4. **edge_type_context**: A JSON object that defines possible relationships (edges) between entities, including names, descriptions, source/target types, and rules for relationship classification.\n5. **previous_episodes_json**: A JSON array that may contain previously extracted relationships from earlier journal entries, which can provide context for the current extraction.\n\n### Task Description:\n1. Analyze the **episode_content** to identify relationships between entities defined in **entities_json**.\n2. Classify these relationships according to the allowed edge types specified in **edge_type_context**.\n3. Construct a list of extracted relationships (edges) in the specified format, which includes:\n   - source_entity_id\n   - target_entity_id\n   - relation_type\n   - fact (the reasoning or context from the journal entry justifying the relationship)\n   - valid_at (timestamp)\n   - invalid_at (if applicable)\n\n### Relationship Types:\n- Relationships can be classified into several types, including but not limited to:\n  - **Knows**: Indicates familiarity or acquaintance between two people.\n  - **SpendsTimeWith**: Suggests that two individuals share meaningful time together.\n  - **Supports**: Implies one person offers support to another.\n  - **ConflictsWith**: Indicates tension or conflict between two people.\n  - **ParticipatesIn**: Denotes participation in an activity by a person.\n  - **OccursAt**: Connects an activity to a specific place.\n  - **Visits**: Indicates that a person frequently spends time at a place.\n  - **RELATES_TO**: A generic relationship that can apply to any two entities.\n\n### Key Considerations:\n- Ensure that the relationships you extract are accurate, complete, and precise. \n- Avoid hallucinations (the generation of relationships that are not supported by the text).\n- Validate the appropriateness of relationship types in various contexts.\n- Continuously assess and improve the model's performance by testing with diverse journal entries and contexts.\n- If a relationship cannot be definitively classified, default to using the RELATES_TO relationship, but be cautious about overusing this generic classification.\n\nYour outputs should be structured and well-reasoned, highlighting the relationships clearly and maintaining the integrity of the information extracted from the journal entries.",
      "fields": [
        {
          "prefix": "Episode Content:",
          "description": "journal entry text"
        },
        {
          "prefix": "Entities Json:",
          "description": "available entities as JSON"
        },
        {
          "prefix": "Reference Time:",
          "description": "timestamp for context"
        },
        {
          "prefix": "Edge Type Context:",
          "description": "allowed relationship types"
        },
        {
          "prefix": "Previous Episodes Json:",
          "description": "prior episode context"
        },
        {
          "prefix": "Reasoning: Let's think step by step in order to",
          "description": "${reasoning}"
        },
        {
          "prefix": "Edges:",
          "description": "extracted relationships"
        }
      ]
    },
    "lm": null
  },
  "metadata": {
    "dependency_versions": {
      "python": "3.13",
      "dspy": "3.0.4",
      "cloudpickle": "3.1"
    }
  }
}
