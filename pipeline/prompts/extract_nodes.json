{
  "extractor.predict": {
    "traces": [],
    "train": [],
    "demos": [
      {
        "augmented": true,
        "episode_content": "Met Sarah at Blue Bottle Coffee this morning. We talked about our career goals and how we're both feeling stuck. It's nice to have someone who gets it.",
        "entity_types": "[{\"entity_type_id\": 0, \"entity_type_name\": \"Entity\", \"entity_type_description\": \"fallback for significant entities that do not fit custom types\"}, {\"entity_type_id\": 1, \"entity_type_name\": \"Person\", \"entity_type_description\": \"people mentioned in the journal: friends, family, coworkers, crushes, therapists, mentors, neighbors, etc.\"}, {\"entity_type_id\": 2, \"entity_type_name\": \"Place\", \"entity_type_description\": \"specific locations or restorative spaces such as homes, parks, studios, cafes, clinics, or travel stops.\"}, {\"entity_type_id\": 3, \"entity_type_name\": \"Organization\", \"entity_type_description\": \"communities, teams, companies, collectives, or groups the author interacts with.\"}, {\"entity_type_id\": 4, \"entity_type_name\": \"Activity\", \"entity_type_description\": \"events, rituals, or routines (therapy session, sunrise swim, volunteer shift, study group, etc.).\"}]",
        "reasoning": "The journal entry mentions Sarah, a person, and Blue Bottle Coffee, a specific location. The interaction described is a meeting, which qualifies as an activity. The phrase \"we talked about our career goals\" refers to a discussion, which is part of the activity. No organizations are explicitly named, and no broader groups or institutions are referenced. Therefore, the entities are identified as Sarah (Person), Blue Bottle Coffee (Place), and the meeting (Activity).",
        "extracted_entities": {
          "extracted_entities": [
            {
              "name": "Sarah",
              "entity_type_id": 1
            },
            {
              "name": "Blue Bottle Coffee",
              "entity_type_id": 2
            },
            {
              "name": "meeting",
              "entity_type_id": 4
            }
          ]
        }
      },
      {
        "augmented": true,
        "episode_content": "Had my session with Dr. Martinez today. We talked about my relationship patterns and why I keep pushing people away. Heavy stuff but necessary.",
        "entity_types": "[{\"entity_type_id\": 0, \"entity_type_name\": \"Entity\", \"entity_type_description\": \"fallback for significant entities that do not fit custom types\"}, {\"entity_type_id\": 1, \"entity_type_name\": \"Person\", \"entity_type_description\": \"people mentioned in the journal: friends, family, coworkers, crushes, therapists, mentors, neighbors, etc.\"}, {\"entity_type_id\": 2, \"entity_type_name\": \"Place\", \"entity_type_description\": \"specific locations or restorative spaces such as homes, parks, studios, cafes, clinics, or travel stops.\"}, {\"entity_type_id\": 3, \"entity_type_name\": \"Organization\", \"entity_type_description\": \"communities, teams, companies, collectives, or groups the author interacts with.\"}, {\"entity_type_id\": 4, \"entity_type_name\": \"Activity\", \"entity_type_description\": \"events, rituals, or routines (therapy session, sunrise swim, volunteer shift, study group, etc.).\"}]",
        "reasoning": "The journal entry mentions a session with Dr. Martinez, indicating a person involved in therapy. The relationship patterns and emotional themes discussed suggest a therapeutic activity. \"Dr. Martinez\" is clearly a person, and the session is a specific type of activity. The location is not explicitly named, so no place is extracted. No organization is mentioned. Therefore, the entities are: Dr. Martinez (Person), and the therapy session (Activity).",
        "extracted_entities": {
          "extracted_entities": [
            {
              "name": "Dr. Martinez",
              "entity_type_id": 1
            },
            {
              "name": "therapy session",
              "entity_type_id": 4
            }
          ]
        }
      },
      {
        "episode_content": "I biked the Embarcadero alone before sunrise to calm my nerves. The cold air finally slowed my racing thoughts.",
        "entity_types": "[{\"entity_type_id\": 0, \"entity_type_name\": \"Entity\", \"entity_type_description\": \"fallback for significant entities that do not fit custom types\"}, {\"entity_type_id\": 1, \"entity_type_name\": \"Person\", \"entity_type_description\": \"people mentioned in the journal: friends, family, coworkers, crushes, therapists, mentors, neighbors, etc.\"}, {\"entity_type_id\": 2, \"entity_type_name\": \"Place\", \"entity_type_description\": \"specific locations or restorative spaces such as homes, parks, studios, cafes, clinics, or travel stops.\"}, {\"entity_type_id\": 3, \"entity_type_name\": \"Organization\", \"entity_type_description\": \"communities, teams, companies, collectives, or groups the author interacts with.\"}, {\"entity_type_id\": 4, \"entity_type_name\": \"Activity\", \"entity_type_description\": \"events, rituals, or routines (therapy session, sunrise swim, volunteer shift, study group, etc.).\"}]",
        "extracted_entities": {
          "extracted_entities": [
            {
              "name": "Self",
              "entity_type_id": 1
            },
            {
              "name": "the Embarcadero",
              "entity_type_id": 2
            },
            {
              "name": "solo sunrise ride",
              "entity_type_id": 4
            }
          ]
        }
      }
    ],
    "signature": {
      "instructions": "text\nSystem/Task Instruction: Robust Entity Extraction from Personal Journal Entries\n\nGoal\nGiven a personal journal entry (episode_content) and a defined ontology of entity types, accurately extract all significant entities that fit the ontology. Focus on five entity categories:\n- 0 Entity (Concept/General Idea)\n- 1 Person\n- 2 Place\n- 3 Organization\n- 4 Activity\n\nInput format (unchanged across tasks)\n- episode_content: a single string containing the journal entry.\n- entity_types: a JSON list of objects, each with:\n  - entity_type_id: int (0, 1, 2, 3, or 4)\n  - entity_type_name: string (e.g., \"Entity\", \"Person\", \"Place\", \"Organization\", \"Activity\")\n  - entity_type_description: string (brief description)\n\nOutput format\nReturn a single JSON-like structure containing:\n- extracted_entities: a list of entities, where each entry has:\n  - name: string (the surface form as it appears in the text, exactly as it should be displayed)\n  - entity_type_id: int (one of 0, 1, 2, 3, 4)\n  - start_char: int (starting character index of the entity in episode_content, 0-based)\n  - end_char: int (exclusive end index in episode_content)\nNotes:\n- Do not reveal internal chain-of-thought or reasoning. Provide only the structured extraction results.\n- Ensure that spans are exact and non-overlapping. When a single multiword phrase corresponds to a single ground-truth entity, treat it as one span.\n- If a candidate phrase contains multiple valid sub-entities, prefer extracting the largest valid span that matches a single ground-truth entity. Do not emit overlapping or partial spans that would split a known multiword entity into smaller parts.\n- Do not invent entities that are not clearly supported by the text. If uncertain, err on the side of abstaining (do not produce an entity) rather than producing a dubious split.\n- If a phrase is clearly a named location, person, organization, or activity, annotate accordingly. If a phrase is a generic concept or idea, annotate as 0 (Entity).\n- The five entity types map to IDs exactly as described in the input ontology (0=Entity, 1=Person, 2=Place, 3=Organization, 4=Activity). Do not re-label with alternate IDs.\n- Self/author references (e.g., “I”, “my”) are not required unless the task explicitly asks for an author/self entity. Do not create a Self-type unless that type is part of the current ontology.\n\nExtraction rules and best practices\n- Boundary and surface form:\n  - Use exact character spans. If necessary, preserve capitalization and punctuation as it appears.\n  - Preserve known multiword phrases as single entities (e.g., a well-known place, group, or event) rather than splitting into smaller parts.\n- Ontology alignment:\n  - 1 Person: named individuals mentioned (e.g., friends, managers, mentors). Do not classify pronouns or generic references as Person.\n  - 2 Place: specific locations or restorative spaces (homes, parks, studios, cafes, clinics, etc.). Include proper nouns and well-known locations.\n  - 3 Organization: communities, teams, companies, collectives, or groups the author interacts with.\n  - 4 Activity: events, rituals, or routines (e.g., therapy sessions, product launches, hikes) that function as a discernible activity in the journal.\n  - 0 Entity: concepts, ideas, or abstract references (e.g., burnout, meaning, north star).\n- Temporal/extra content:\n  - Do not attempt to tag dates, times, or ordinal numbers unless they clearly function as an entity of one of the five types.\n- No self-labeling:\n  - Do not create a Self-type or author-label unless the ontology explicitly includes such a type. Focus on the five defined categories.\n\nQuality controls\n- When evaluating outputs, prefer exact matches to the ground-truth spans and types. Use exact-span matching; partial overlaps or partial spans should be avoided.\n- If multiple valid interpretations exist for a span, choose the interpretation that yields a single, coherent entity consistent with the ontology, and document the rationale only in internal notes (not in the user-visible output).\n- Provide deterministic outputs: the same input should always yield the same extracted_entities with identical spans and types.\n\nExample (illustrative; do not copy verbatim)\nInput:\nepisode_content: \"Spent the evening at Haven House support circle naming the burnout spiral out loud. Jenna held space for all our messy feelings and had us write a \"north star\" intention for how we want to feel this week.\"\nentity_types: [ {0: Entity, ...}, {1: Person, ...}, {2: Place, ...}, {3: Organization, ...}, {4: Activity, ...} ]\n\nOutput (structure):\n{\n  \"extracted_entities\": [\n    {\"name\": \"burnout spiral\", \"entity_type_id\": 0, \"start_char\": 90, \"end_char\": 106},\n    {\"name\": \"Haven House\", \"entity_type_id\": 2, \"start_char\": 28, \"end_char\": 39},\n    {\"name\": \"support circle\", \"entity_type_id\": 4, \"start_char\": 40, \"end_char\": 53},\n    {\"name\": \"Jenna\", \"entity_type_id\": 1, \"start_char\": 0, \"end_char\": 5},\n    {\"name\": \"north star intention\", \"entity_type_id\": 0, \"start_char\": 78, \"end_char\": 97}\n  ]\n}\n\nIf you encounter a multiword phrase that clearly constitutes a single ground-truth entity, merge into one span and assign the correct type. If a phrase does not align with any ground-truth entity, omit it rather than forcing an incorrect type.\n\nOptional notes for model development (internal, not user-facing)\n- Maintain a fixed, public mapping of entity_type_id to labels for downstream consumers.\n- Consider creating targeted test prompts that include known tricky multiword phrases (e.g., “haven house support circle”, “burnout spiral”, “north star intention”) to guard against splitting.\n- Do not reveal the internal reasoning steps or intermediate hypotheses in the final output.",
      "fields": [
        {
          "prefix": "Episode Content:",
          "description": "personal journal entry describing experiences, relationships, locations, and reflections"
        },
        {
          "prefix": "Entity Types:",
          "description": "available entity types: Person, Place, Organization, Concept, Activity, and Entity (fallback for others)"
        },
        {
          "prefix": "Reasoning: Let's think step by step in order to",
          "description": "${reasoning}"
        },
        {
          "prefix": "Extracted Entities:",
          "description": "entities mentioned: individuals, specific venues/locations, institutions/groups, abstract topics/themes, and activities/events"
        }
      ]
    },
    "lm": null
  },
  "metadata": {
    "dependency_versions": {
      "python": "3.13",
      "dspy": "3.0.4",
      "cloudpickle": "3.1"
    }
  }
}
