{
  "extractor.predict": {
    "traces": [],
    "train": [],
    "demos": [],
    "signature": {
      "instructions": "You are tasked with extracting relationships between entities from journal entries. The extraction should be based on the provided context, which includes the journal content, a list of entities, their types, and a description of allowed relationship types. Follow these detailed guidelines to ensure accuracy and completeness in your outputs.\n\n### Input Format:\n1. **episode_content**: A string representing the journal entry, which may contain personal reflections, interactions, and activities.\n2. **entities_json**: A JSON array listing entities mentioned in the journal entry, each with an ID, name, entity types (such as Person, Place, Activity), and notes about their significance.\n3. **reference_time**: A timestamp indicating when the events in the journal entry took place.\n4. **edge_type_context**: A JSON object that defines various relationship types (like Knows, Supports, Visits, etc.) between entities, including descriptions and allowed source/target types.\n5. **previous_episodes_json**: A JSON array (potentially empty) representing past entries that may inform the current context.\n\n### Task Description:\n- Extract and represent relationships between the identified entities based on the journal entry. Each relationship should be expressed as an edge, which consists of a source entity, a target entity, a relationship type, a fact grounding the relationship, and validity timestamps.\n- Ensure that the relationships are accurately derived from the content of the journal entry, reflecting the dynamics between the entities involved.\n\n### Extraction Guidelines:\n1. **Relationship Types**: Use only the allowed relationship types from `edge_type_context`. Relationships could include:\n   - **Knows**: Indicates ongoing familiarity between two persons.\n   - **SpendsTimeWith**: Indicates meaningful time spent together.\n   - **Supports**: Indicates support (emotional or practical) offered by one person to another (asymmetric).\n   - **ParticipatesIn**: Indicates a person is involved in an activity.\n   - **Visits**: Indicates a person frequently spends time at a place.\n   - **OccursAt**: Indicates an activity is associated with a specific place.\n\n2. **Fact Grounding**: Ensure the facts provided in the output maintain a first-person perspective when referring to the author of the journal. Avoid analytical language and emotional interpretationsâ€”focus on direct statements of facts.\n\n3. **Completeness**: Strive to capture all relevant relationships mentioned in the journal entry. Do not omit significant interactions or connections between entities.\n\n4. **Conciseness**: Keep the language used in the output concise and to the point. Each edge should ideally consist of one short sentence that clearly describes the relationship.\n\n5. **Avoid Hallucinations**: Do not create relationships that are not supported by the text. Ensure all extracted relationships are directly backed by the information provided in the journal entry.\n\n### Output Format:\n- The output should be a JSON array of edges, where each edge is represented as:\n```json\n{\n  \"source_entity_id\": <id of the source entity>,\n  \"target_entity_id\": <id of the target entity>,\n  \"relation_type\": \"<type of relationship>\",\n  \"fact\": \"<fact that supports the relationship>\",\n  \"valid_at\": \"<timestamp>\",\n  \"invalid_at\": null\n}\n```\n\nBy following these guidelines, you will effectively extract meaningful relationships from the journal entries while adhering to the context and entity definitions provided.",
      "fields": [
        {
          "prefix": "Episode Content:",
          "description": "journal entry text"
        },
        {
          "prefix": "Entities Json:",
          "description": "available entities as JSON"
        },
        {
          "prefix": "Reference Time:",
          "description": "timestamp for context"
        },
        {
          "prefix": "Edge Type Context:",
          "description": "allowed relationship types"
        },
        {
          "prefix": "Previous Episodes Json:",
          "description": "prior episode context"
        },
        {
          "prefix": "Reasoning: Let's think step by step in order to",
          "description": "${reasoning}"
        },
        {
          "prefix": "Edges:",
          "description": "extracted relationships"
        }
      ]
    },
    "lm": null
  },
  "metadata": {
    "dependency_versions": {
      "python": "3.13",
      "dspy": "3.0.4",
      "cloudpickle": "3.1"
    }
  }
}
