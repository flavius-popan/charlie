{% extends "base.html" %} {% block title %}Communities - Charlie{% endblock %}
{% block content %}
<div class="communities-page">
    <header class="page-header">
        <h1>Communities</h1>
        <p class="subtitle">
            Thematic clusters of related entities discovered in your journal
        </p>
    </header>

    {% if communities %}
    <div class="communities-grid">
        {% for community in communities %}
        <article class="community-card">
            <h2 class="community-title">
                <a href="/communities/{{ community.uuid }}">
                    {{ community.name }}
                </a>
            </h2>

            {% if community.summary %}
            <p class="community-summary">{{ community.summary }}</p>
            {% else %}
            <p class="community-summary muted">No summary available</p>
            {% endif %}

            <footer class="community-meta">
                <span class="meta-item">
                    <strong>Members:</strong> {{ community.member_count if
                    community.member_count else 'N/A' }}
                </span>
            </footer>
        </article>
        {% endfor %}
    </div>

    {% if total_pages > 1 %}
    <nav class="pagination">
        {% if has_prev %}
        <a href="/communities?page={{ page - 1 }}" class="pagination-link"
            >← Previous</a
        >
        {% else %}
        <span class="pagination-link disabled">← Previous</span>
        {% endif %}

        <span class="pagination-info">
            Page {{ page }} of {{ total_pages }}
        </span>

        {% if has_next %}
        <a href="/communities?page={{ page + 1 }}" class="pagination-link"
            >Next →</a
        >
        {% else %}
        <span class="pagination-link disabled">Next →</span>
        {% endif %}
    </nav>
    {% endif %} {% else %}
    <div class="empty-state">
        <h2>No Communities Found</h2>
        <p>No multi-member communities have been discovered yet.</p>
        <p>
            Communities are automatically generated when you load journal
            entries.
        </p>
        <p style="margin-top: 2rem">
            <a href="/" class="pagination-link">← Back to Journal Entries</a>
        </p>
    </div>
    {% endif %}
</div>
{% endblock %}
